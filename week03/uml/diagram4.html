<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ 4: ë©”ëª¨ë¦¬ ëª…ë ¹ì–´ ì²˜ë¦¬</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: white;
        }
        .mermaid {
            background: white;
        }
    </style>
</head>
<body>
    <h2>ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ 4: ë©”ëª¨ë¦¬ ëª…ë ¹ì–´ ì²˜ë¦¬ íë¦„</h2>
    <div class="mermaid">
sequenceDiagram
    participant User
    participant Main
    participant MM as MemoryManager
    participant ChromaDB

    rect rgb(240, 248, 255)
        Note over User,ChromaDB: ëª…ë ¹ì–´ 1: /memory (í†µê³„ ë³´ê¸°)
        
        User->>Main: ì…ë ¥: "memory"
        Main->>MM: print_memory_dashboard()
        activate MM
        
        MM->>MM: get_memory_stats()
        MM->>ChromaDB: collection.get() - ì „ì²´ ë¬¸ì„œ ì¡°íšŒ
        activate ChromaDB
        ChromaDB-->>MM: all_documents
        deactivate ChromaDB
        
        MM->>MM: í†µê³„ ê³„ì‚°<br/>- ì†ŒìŠ¤ë³„ ì¹´ìš´íŠ¸<br/>- ë‚ ì§œë³„ ì¹´ìš´íŠ¸<br/>- í‰ê·  í…ìŠ¤íŠ¸ ê¸¸ì´
        MM->>MM: ëŒ€ì‹œë³´ë“œ í¬ë§·íŒ…
        MM->>User: ëŒ€ì‹œë³´ë“œ ì¶œë ¥<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>ğŸ“Š ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ<br/>ì´ ë¬¸ì„œ: 15ê°œ<br/>ì†ŒìŠ¤ë³„ ë¶„í¬...<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        deactivate MM
    end
    
    rect rgb(255, 248, 240)
        Note over User,ChromaDB: ëª…ë ¹ì–´ 2: /memory-search (ì§ì ‘ ê²€ìƒ‰)
        
        User->>Main: ì…ë ¥: "memory-search ì „ê¸°ì°¨"
        Main->>MM: search_memory("ì „ê¸°ì°¨", top_k=5)
        activate MM
        
        MM->>MM: create_embedding("ì „ê¸°ì°¨")
        MM->>ChromaDB: collection.query()
        activate ChromaDB
        ChromaDB-->>MM: results (5ê°œ)
        deactivate ChromaDB
        
        MM->>MM: format_results()<br/>- ìœ ì‚¬ë„ ê³„ì‚°<br/>- ì¶œì²˜ ì •ë³´ ì¶”ê°€
        MM-->>Main: formatted_results
        deactivate MM
        
        Main->>User: ê²€ìƒ‰ ê²°ê³¼ ì¶œë ¥<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>ğŸ” 5ê°œ ê²°ê³¼<br/>1. [ìœ ì‚¬ë„: 0.92]<br/>   í…ìŠ¤íŠ¸...<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    end
    </div>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            sequence: {
                width: 150,
                height: 50
            }
        });
    </script>
</body>
</html>
