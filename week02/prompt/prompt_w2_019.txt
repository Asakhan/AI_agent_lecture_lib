src/conversation_manager.pyì˜ chat ë©”ì„œë“œë¥¼ ìˆ˜ì •í•´ì£¼ì„¸ìš”.

[ê¸°ì¡´ chat ë©”ì„œë“œ êµ¬ì¡°]
def chat(self, user_input: str) -> str:
    # ì…ë ¥ ê²€ì¦
    # ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
    # API í˜¸ì¶œ
    # ì‘ë‹µ ì¶”ì¶œ
    # Assistant ë©”ì‹œì§€ ì¶”ê°€
    # ë°˜í™˜

[ìˆ˜ì •í•  ë¶€ë¶„]

1. API í˜¸ì¶œ ë¶€ë¶„ ë³€ê²½
   ê¸°ì¡´:
   response = self.client.chat.completions.create(
       model=DEFAULT_MODEL,
       messages=self.messages,
       temperature=DEFAULT_TEMPERATURE
   )
   
   ë³€ê²½:
   response = self._call_api_with_tools()

2. ì‘ë‹µ ì²˜ë¦¬ ë¶€ë¶„ ë³€ê²½
   ê¸°ì¡´:
   assistant_message = response.choices[0].message.content
   self.messages.append({"role": "assistant", "content": assistant_message})
   return assistant_message
   
   ë³€ê²½:
   message = response.choices[0].message
   
   # ğŸ†• ë„êµ¬ í˜¸ì¶œ í™•ì¸ ë° ì²˜ë¦¬
   if message.tool_calls:
       logger.info(f"ë„êµ¬ í˜¸ì¶œ ê°ì§€: {len(message.tool_calls)}ê°œ")
       result = self._handle_tool_calls(message)
   else:
       # ì¼ë°˜ ì‘ë‹µ
       result = message.content
       self.messages.append({
           "role": "assistant",
           "content": result
       })
   
   self.message_count += 1
   self.state = "idle"
   return result

[ì „ì²´ ìˆ˜ì •ëœ chat ë©”ì„œë“œ êµ¬ì¡°]
def chat(self, user_input: str) -> str:
    # ì…ë ¥ ê²€ì¦
    if not user_input or not user_input.strip():
        raise ValueError("ì…ë ¥ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.")
    
    user_input = user_input.strip()
    self.state = "processing"
    
    # ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
    self.messages.append({
        "role": "user",
        "content": user_input
    })
    
    try:
        # ğŸ†• ë„êµ¬ í¬í•¨í•˜ì—¬ API í˜¸ì¶œ
        response = self._call_api_with_tools()
        message = response.choices[0].message
        
        # ğŸ†• ë„êµ¬ í˜¸ì¶œ í™•ì¸ ë° ì²˜ë¦¬
        if message.tool_calls:
            logger.info(f"ë„êµ¬ í˜¸ì¶œ ê°ì§€: {len(message.tool_calls)}ê°œ")
            result = self._handle_tool_calls(message)
        else:
            # ì¼ë°˜ ì‘ë‹µ
            result = message.content
            self.messages.append({
                "role": "assistant",
                "content": result
            })
        
        self.message_count += 1
        self.state = "idle"
        return result
        
    except Exception as e:
        self.state = "error"
        logger.error(f"ì‘ë‹µ ìƒì„± ì‹¤íŒ¨: {str(e)}")
        raise

[ìš”êµ¬ì‚¬í•­]
- ê¸°ì¡´ ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§ ìœ ì§€
- message.tool_callsê°€ Noneì´ê±°ë‚˜ ë¹ˆ ë¦¬ìŠ¤íŠ¸ì¼ ë•Œ ì¼ë°˜ ì‘ë‹µ ì²˜ë¦¬
- ë¡œê¹… ìœ ì§€/ê°•í™”